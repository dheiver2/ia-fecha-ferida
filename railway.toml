# Configuração do Railway para deploy do backend
[[services]]
name = "fecha-ferida-backend"

[services.build]
builder = "nixpacks"
buildCommand = "npm install && npm run seed"

[services.deploy]
startCommand = "npm start"
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "on_failure"

[services.source]
repo = "."
branch = "main"
rootDirectory = "backend"

[services.variables]
NODE_ENV = "production"
PORT = "3001"
# IMPORTANTE: Configure estas variáveis diretamente no painel do Railway
# Nunca commite credenciais reais no repositório!
# GEMINI_API_KEY = "configure_no_railway_dashboard"
# JWT_SECRET = "configure_no_railway_dashboard"
# DATABASE_URL = "configure_no_railway_dashboard"
FRONTEND_URL = "${FRONTEND_URL}"
ALLOWED_ORIGINS = "${ALLOWED_ORIGINS}"