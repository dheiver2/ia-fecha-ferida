[[services]]
name = "fecha-ferida-backend"

[services.build]
builder = "nixpacks"
buildCommand = "npm install && npm run seed"

[services.deploy]
startCommand = "npm start"
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "on_failure"

[services.source]
repo = "."
branch = "main"
rootDirectory = "backend"

[services.variables]
NODE_ENV = "production"
PORT = "3001"
GEMINI_API_KEY = "AIzaSyAf4OvR408NrNp6pQaBCJKMWXeZnTaXuTU"
JWT_SECRET = "OoAPaqNC4c9xVthGvqDuOZ9ZtU0B1So2"
DATABASE_URL = "postgresql://neondb_owner:npg_gHsPjVuap5O0@ep-old-surf-advzi4ig-pooler.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require"
FRONTEND_URL = "https://fecha-ferida-kpb0ko4bw-dheiver2s-projects.vercel.app"
ALLOWED_ORIGINS = "https://fecha-ferida-kpb0ko4bw-dheiver2s-projects.vercel.app"